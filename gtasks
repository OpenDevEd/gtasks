#!/usr/bin/env python
"""Main script to act as an entry point and parse any args."""
import argparse

from tasks.authenticate import authenticate
from tasks.backup import backup


def main():
    parser = argparse.ArgumentParser(prog="gtasks")
    parser.set_defaults(func=lambda _: parser.print_help())
    subparsers = parser.add_subparsers(dest="command")

    authenticate = subparsers.add_parser(
        'authenticate', help='Authenticate the use of your google account for access to the google task APIs'
    )
    authenticate.set_defaults(func=authenticate_hook)

    backup = subparsers.add_parser(
        'backup', help='Backup your tasks to a local JSON file'
    )
    backup.set_defaults(func=backup_hook)

    process = subparsers.add_parser(
        'process', help='Search Tasks and perform actions on them'
    )
    process.set_defaults(func=process_hook)
    # Add the more complicated options here for process.

    args = parser.parse_args()
    args.func(args)


def authenticate_hook(args):
    authenticate()


def backup_hook(args):
    print("Backing up!")
    backup()


def process_hook(args):
    print("Processing!")


if __name__ == '__main__':
    main()
